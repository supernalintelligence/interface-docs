#!/bin/bash

# Pre-push hook for interface-docs
# Validates docs-site build before push

set -e

echo "ğŸ” Running pre-push checks for interface-docs..."

echo "ğŸ” Checking package-lock.json sync..."
if ! npm ci --dry-run --silent > /dev/null 2>&1; then
    echo "âŒ package-lock.json is out of sync with package.json"
    echo "ğŸ’¡ Run 'npm install' to fix this issue"
    exit 1
fi

echo "ğŸ“¦ Installing dependencies..."
npm ci --silent

echo "ğŸ—ï¸  Building Next.js site..."
npm run build

echo "ğŸ“‹ Verifying build artifacts..."
if [ ! -d ".next" ]; then
    echo "âŒ Build artifacts missing"
    exit 1
fi

echo "âœ… All pre-push checks passed!"

