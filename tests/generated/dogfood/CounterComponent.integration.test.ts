/**
 * CounterComponent - Integration Tests
 * Auto-generated by Supernal Interface Test Generator
 * 
 * This file contains comprehensive tests for all @Tool decorated methods.
 * Tests include safety controls, AI execution permissions, and functionality.
 */

import { ToolRegistry } from '@supernal/interface';
import { CounterComponent } from '../../src/tools/ExampleTools';

describe('CounterComponent - Integration Tests', () => {
  let provider: CounterComponent;

  beforeAll(async () => {
    provider = new CounterComponent();
    ToolRegistry.registerProvider('CounterComponent', provider);
  });

  describe('Registry Integration', () => {
    test('should register all tools correctly', () => {
      const stats = ToolRegistry.getStats();
      expect(stats.totalTools).toBeGreaterThan(0);
    });

    test('should categorize tools by AI safety', () => {
      const aiTools = ToolRegistry.getAIEnabledTools();
      const stats = ToolRegistry.getStats();
      expect(stats.aiEnabled + stats.testOnly).toBe(stats.totalTools);
    });
  });

  describe('Execution Workflows', () => {
    test('should execute AI-enabled tools via executeForAI', async () => {
      const result = await ToolRegistry.executeForAI('CounterComponent.increment', {});
      expect(result.success).toBe(true);
    });

    test('should reject test-only tools via executeForAI', async () => {
      const result = await ToolRegistry.executeForAI('CounterComponent.decrement', {});
      expect(result.success).toBe(false);
      expect(result.error).toContain('not AI-enabled');
    });

  });

  describe('Natural Language Interface', () => {
    test('should find tools by natural language query', () => {
      const results = ToolRegistry.findToolsByQuery('get users');
      expect(results.length).toBeGreaterThan(0);
    });
  });
});
