/**
 * ⚠️  AUTO-GENERATED FILE - DO NOT EDIT
 * 
 * This file is automatically generated from Gherkin feature files.
 * To make changes:
 *   1. Edit the .feature file in features/
 *   2. Run: npm run story:generate
 * 
 * Generated Playwright Test
 * Feature: Chat Messages
 * 
 * Generated by: GraphTestGenerator
 */

import { test, expect } from '@playwright/test';
import { testId } from '@supernal/interface/testing';
import { Chat } from '../../../src/architecture/DemoComponentNames';
import { Routes } from '../../../src/architecture/Routes';
import { initializeTestState } from '@supernal/interface/testing';

test.describe('Chat Messages', () => {
  test.setTimeout(30000);

  // Initialize test state manager after page navigation
  test.afterEach(async ({ page }) => {
    // Clean up test state after each test
  });

  test('Send one message', async ({ page }) => {
    // Execution order: Send one message-133 → Send one message-134 → Send one message-135 → Send one message-136 → Send one message-137 → Send one message-138
    // Given I am on Routes.Demo
    await page.goto(`${Routes.Demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I type "Hello, World!" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Hello, World!');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages should contain 1 message
    // Verify Components.Chat.messages contains 1 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(1);

  });

  test('Send multiple messages', async ({ page }) => {
    // Execution order: Send multiple messages-139 → Send multiple messages-140 → Send multiple messages-141 → Send multiple messages-142 → Send multiple messages-143 → Send multiple messages-144 → Send multiple messages-145 → Send multiple messages-146 → Send multiple messages-147 → Send multiple messages-148
    // Given I am on Routes.Demo
    await page.goto(`${Routes.Demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I type "First message" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('First message');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // And I type "Second message" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Second message');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // And I type "Third message" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Third message');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages should contain 3 messages
    // Verify Components.Chat.messages contains 3 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(3);

  });

});
