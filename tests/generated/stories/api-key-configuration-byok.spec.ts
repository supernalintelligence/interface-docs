/**
 * ⚠️  AUTO-GENERATED FILE - DO NOT EDIT MANUALLY!
 * 
 * ❌ WARNING: ANY MANUAL EDITS WILL BE OVERWRITTEN ON NEXT GENERATION
 * 
 * This file is automatically generated from Gherkin feature files.
 * To make changes:
 *   1. Edit the .feature file in features/
 *   2. Regenerate: npx si generate-story-tests features -o tests/generated/stories
 * 
 * Generated Playwright Test
 * Feature: API Key Configuration (BYOK)
 * 
 * Generated by: GraphTestGenerator
 * Generated at: 2026-01-29T23:50:49.088Z
 */

import { test, expect } from '@playwright/test';
import { testId } from '@supernal/interface/testing';
import { ApiKey, Chat } from '../../../src/architecture/ComponentNames';
import { Routes } from '../../../src/architecture/Routes';
import { initializeTestState } from '@supernal/interface/testing';

test.describe('API Key Configuration (BYOK)', () => {
  test.setTimeout(30000);

  // Initialize test state manager after page navigation
  test.afterEach(async ({ page }) => {
    // Clean up test state after each test
  });

  test('Opening the API key configuration', async ({ page }) => {
    // Execution order: Opening the API key configuration-0 → Opening the API key configuration-1 → Opening the API key configuration-2 → Opening the API key configuration-3 → Opening the API key configuration-4 → Opening the API key configuration-5
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // Then Components.ApiKey.moreMenu should be visible
    await expect(page.locator(testId(ApiKey.moreMenu))).toBeVisible();

    // And Components.ApiKey.configureButton should be visible
    await page.locator(testId(ApiKey.configureButton)).first().waitFor({ state: 'visible' });

  });

  test('Entering a new API key', async ({ page }) => {
    // Execution order: Entering a new API key-6 → Entering a new API key-7 → Entering a new API key-8 → Entering a new API key-9 → Entering a new API key-10 → Entering a new API key-11 → Entering a new API key-12 → Entering a new API key-13 → Entering a new API key-14
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // And I click Components.ApiKey.configureButton
    await page.locator(testId(ApiKey.configureButton)).first().click();

    // Then Components.ApiKey.section should be visible
    await expect(page.locator(testId(ApiKey.section))).toBeVisible();

    // And Components.ApiKey.input should be visible
    await page.locator(testId(ApiKey.input)).first().waitFor({ state: 'visible' });

    // And Components.ApiKey.submitButton should be visible
    await page.locator(testId(ApiKey.submitButton)).first().waitFor({ state: 'visible' });

    // And Components.ApiKey.cancelButton should be visible
    await page.locator(testId(ApiKey.cancelButton)).first().waitFor({ state: 'visible' });

  });

  test('Submitting a valid API key', async ({ page }) => {
    // Execution order: Submitting a valid API key-15 → Submitting a valid API key-16 → Submitting a valid API key-17 → Submitting a valid API key-18 → Submitting a valid API key-19 → Submitting a valid API key-20 → Submitting a valid API key-21 → Submitting a valid API key-22 → Submitting a valid API key-23
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // And I click Components.ApiKey.configureButton
    await page.locator(testId(ApiKey.configureButton)).first().click();

    // And I type "sk-ant-api03-validkey123" in Components.ApiKey.input
    await page.locator(testId(ApiKey.input)).fill('sk-ant-api03-validkey123');

    // And I click Components.ApiKey.submitButton
    await page.locator(testId(ApiKey.submitButton)).first().click();

    // Then Components.ApiKey.status should be visible
    await expect(page.locator(testId(ApiKey.status))).toBeVisible();

    // And Components.ApiKey.masked should be visible
    await page.locator(testId(ApiKey.masked)).first().waitFor({ state: 'visible' });

  });

  test('Showing and hiding API key', async ({ page }) => {
    // Execution order: Showing and hiding API key-24 → Showing and hiding API key-25 → Showing and hiding API key-26 → Showing and hiding API key-27 → Showing and hiding API key-28 → Showing and hiding API key-29 → Showing and hiding API key-30 → Showing and hiding API key-31 → Showing and hiding API key-32
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // And I click Components.ApiKey.configureButton
    await page.locator(testId(ApiKey.configureButton)).first().click();

    // And I type "sk-ant-api03-validkey123" in Components.ApiKey.input
    await page.locator(testId(ApiKey.input)).fill('sk-ant-api03-validkey123');

    // And I click Components.ApiKey.submitButton
    await page.locator(testId(ApiKey.submitButton)).first().click();

    // And I click Components.ApiKey.showToggle
    await page.locator(testId(ApiKey.showToggle)).first().click();

    // Then Components.ApiKey.input should be visible
    await expect(page.locator(testId(ApiKey.input))).toBeVisible();

  });

  test('Clearing the API key', async ({ page }) => {
    // Execution order: Clearing the API key-33 → Clearing the API key-34 → Clearing the API key-35 → Clearing the API key-36 → Clearing the API key-37 → Clearing the API key-38 → Clearing the API key-39 → Clearing the API key-40 → Clearing the API key-41 → Clearing the API key-42
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // And I click Components.ApiKey.configureButton
    await page.locator(testId(ApiKey.configureButton)).first().click();

    // And I type "sk-ant-api03-validkey123" in Components.ApiKey.input
    await page.locator(testId(ApiKey.input)).fill('sk-ant-api03-validkey123');

    // And I click Components.ApiKey.submitButton
    await page.locator(testId(ApiKey.submitButton)).first().click();

    // And I click Components.ApiKey.clearButton
    await page.locator(testId(ApiKey.clearButton)).first().click();

    // Then Components.ApiKey.configureButton should be visible
    await expect(page.locator(testId(ApiKey.configureButton))).toBeVisible();

    // And Components.ApiKey.status should be hidden
    await expect(page.locator(testId(ApiKey.status))).toBeHidden();

  });

  test('Canceling API key entry', async ({ page }) => {
    // Execution order: Canceling API key entry-43 → Canceling API key entry-44 → Canceling API key entry-45 → Canceling API key entry-46 → Canceling API key entry-47 → Canceling API key entry-48 → Canceling API key entry-49 → Canceling API key entry-50
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // And I click Components.ApiKey.configureButton
    await page.locator(testId(ApiKey.configureButton)).first().click();

    // And I type "sk-ant-api03-partial" in Components.ApiKey.input
    await page.locator(testId(ApiKey.input)).fill('sk-ant-api03-partial');

    // And I click Components.ApiKey.cancelButton
    await page.locator(testId(ApiKey.cancelButton)).first().click();

    // Then Components.ApiKey.section should be hidden
    await expect(page.locator(testId(ApiKey.section))).toBeHidden();

  });

  test('Invalid API key format shows error', async ({ page }) => {
    // Execution order: Invalid API key format shows error-51 → Invalid API key format shows error-52 → Invalid API key format shows error-53 → Invalid API key format shows error-54 → Invalid API key format shows error-55 → Invalid API key format shows error-56 → Invalid API key format shows error-57 → Invalid API key format shows error-58
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // And I click Components.ApiKey.configureButton
    await page.locator(testId(ApiKey.configureButton)).first().click();

    // And I type "invalid-key" in Components.ApiKey.input
    await page.locator(testId(ApiKey.input)).fill('invalid-key');

    // And I click Components.ApiKey.submitButton
    await page.locator(testId(ApiKey.submitButton)).first().click();

    // Then Components.ApiKey.error should be visible
    await expect(page.locator(testId(ApiKey.error))).toBeVisible();

  });

  test('API key persists after page refresh', async ({ page }) => {
    // Execution order: API key persists after page refresh-59 → API key persists after page refresh-60 → API key persists after page refresh-61 → API key persists after page refresh-62 → API key persists after page refresh-63 → API key persists after page refresh-64 → API key persists after page refresh-65 → API key persists after page refresh-66 → API key persists after page refresh-67 → API key persists after page refresh-68 → API key persists after page refresh-69 → API key persists after page refresh-70
    // Given I am on Routes.Demo.Root
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // When I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // And I click Components.ApiKey.configureButton
    await page.locator(testId(ApiKey.configureButton)).first().click();

    // And I type "sk-ant-api03-validkey123" in Components.ApiKey.input
    await page.locator(testId(ApiKey.input)).fill('sk-ant-api03-validkey123');

    // And I click Components.ApiKey.submitButton
    await page.locator(testId(ApiKey.submitButton)).first().click();

    // And I refresh the page
    await page.reload();

    // And I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // And I click Components.ApiKey.moreMenuButton
    await page.locator(testId(ApiKey.moreMenuButton)).first().click();

    // Then Components.ApiKey.status should be visible
    await expect(page.locator(testId(ApiKey.status))).toBeVisible();

    // And Components.ApiKey.masked should be visible
    await page.locator(testId(ApiKey.masked)).first().waitFor({ state: 'visible' });

  });

});
