/**
 * ⚠️  AUTO-GENERATED FILE - DO NOT EDIT MANUALLY!
 * 
 * ❌ WARNING: ANY MANUAL EDITS WILL BE OVERWRITTEN ON NEXT GENERATION
 * 
 * This file is automatically generated from Gherkin feature files.
 * To make changes:
 *   1. Edit the .feature file in features/
 *   2. Regenerate: npx si generate-story-tests features -o tests/generated/stories
 * 
 * Generated Playwright Test
 * Feature: Story Flow Demonstration
 * 
 * Generated by: GraphTestGenerator
 * Generated at: 2026-01-28T06:59:27.753Z
 */

import { test, expect } from '@playwright/test';
import { testId } from '@supernal/interface/testing';
import { Chat, Counter } from '../../../src/architecture/ComponentNames';
import { Routes } from '../../../src/architecture/Routes';
import { initializeTestState } from '@supernal/interface/testing';

test.describe('Story Flow Demonstration', () => {
  test.setTimeout(30000);

  // Initialize test state manager after page navigation
  test.afterEach(async ({ page }) => {
    // Clean up test state after each test
  });

  test('Complete user journey through chat and counter', async ({ page }) => {
    // Execution order: Complete user journey through chat and counter-58 → Complete user journey through chat and counter-59 → Complete user journey through chat and counter-60 → Complete user journey through chat and counter-61 → Complete user journey through chat and counter-62 → Complete user journey through chat and counter-63 → Complete user journey through chat and counter-64 → Complete user journey through chat and counter-65 → Complete user journey through chat and counter-66 → Complete user journey through chat and counter-67 → Complete user journey through chat and counter-68
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Counter.widget is visible
    await page.locator(testId(Counter.widget)).first().waitFor({ state: 'visible' });

    // And Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // And I type "Hello, I'm testing the story flow" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Hello, I\'m testing the story flow');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages should contain 1 message
    // Verify Components.Chat.messages contains 1 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(1);

    // When I click Components.Counter.increment 3 times
    for (let i = 0; i < 3; i++) {
      await page.locator(testId(Counter.increment)).first().click();
    }

    // Then Components.Counter.widget should contain "3"
    await expect(page.locator(testId(Counter.widget)).first()).toContainText('3');

    // When I click Components.Counter.reset
    await page.locator(testId(Counter.reset)).first().click();

    // Then Components.Counter.widget should contain "0"
    await expect(page.locator(testId(Counter.widget)).first()).toContainText('0');

  });

  test('Multiple counter increments', async ({ page }) => {
    // Execution order: Multiple counter increments-69 → Multiple counter increments-70 → Multiple counter increments-71 → Multiple counter increments-72 → Multiple counter increments-73 → Multiple counter increments-74
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Counter.widget is visible
    await page.locator(testId(Counter.widget)).first().waitFor({ state: 'visible' });

    // When I click Components.Counter.increment
    await page.locator(testId(Counter.increment)).first().click();

    // And I click Components.Counter.increment
    await page.locator(testId(Counter.increment)).first().click();

    // And I click Components.Counter.increment
    await page.locator(testId(Counter.increment)).first().click();

    // Then Components.Counter.widget should contain "3"
    await expect(page.locator(testId(Counter.widget)).first()).toContainText('3');

  });

  test('Chat and counter together', async ({ page }) => {
    // Execution order: Chat and counter together-75 → Chat and counter together-76 → Chat and counter together-77 → Chat and counter together-78 → Chat and counter together-79 → Chat and counter together-80 → Chat and counter together-81 → Chat and counter together-82 → Chat and counter together-83
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // And Components.Counter.widget is visible
    await page.locator(testId(Counter.widget)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // And I type "Testing multi-component" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Testing multi-component');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages should contain 1 message
    // Verify Components.Chat.messages contains 1 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(1);

    // When I click Components.Counter.increment
    await page.locator(testId(Counter.increment)).first().click();

    // Then Components.Counter.widget should contain "1"
    await expect(page.locator(testId(Counter.widget)).first()).toContainText('1');

  });

});
