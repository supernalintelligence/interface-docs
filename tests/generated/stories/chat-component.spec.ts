/**
 * ⚠️  AUTO-GENERATED FILE - DO NOT EDIT MANUALLY!
 * 
 * ❌ WARNING: ANY MANUAL EDITS WILL BE OVERWRITTEN ON NEXT GENERATION
 * 
 * This file is automatically generated from Gherkin feature files.
 * To make changes:
 *   1. Edit the .feature file in features/
 *   2. Regenerate: npx si generate-story-tests features -o tests/generated/stories
 * 
 * Generated Playwright Test
 * Feature: Chat Component
 * 
 * Generated by: GraphTestGenerator
 * Generated at: 2026-01-30T00:50:43.155Z
 */

import { test, expect } from '@playwright/test';
import { testId } from '@supernal/interface/testing';
import { Chat } from '../../../src/architecture/ComponentNames';
import { Routes } from '../../../src/architecture/Routes';
import { initializeTestState } from '@supernal/interface/testing';

test.describe('Chat Component', () => {
  test.setTimeout(30000);

  // Initialize test state manager after page navigation
  test.afterEach(async ({ page }) => {
    // Clean up test state after each test
  });

  test('Chat input is enabled on page load', async ({ page }) => {
    // Execution order: Chat input is enabled on page load-0 → Chat input is enabled on page load-1
    // Given I am on Routes.demo
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // Then Components.Chat.input should be enabled
    await expect(page.locator(testId(Chat.input))).toBeEnabled();

  });

  test('Sending a message adds it to the chat', async ({ page }) => {
    // Execution order: Sending a message adds it to the chat-2 → Sending a message adds it to the chat-3 → Sending a message adds it to the chat-4 → Sending a message adds it to the chat-5
    // Given I am on Routes.demo
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // When I type "Hello, World!" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Hello, World!');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages last message should be "Hello, World!"
    // Verify last user message contains expected text
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"]').last()).toContainText('Hello, World!');

  });

  test('Multiple messages appear in sequence', async ({ page }) => {
    // Execution order: Multiple messages appear in sequence-6 → Multiple messages appear in sequence-7 → Multiple messages appear in sequence-8 → Multiple messages appear in sequence-9 → Multiple messages appear in sequence-10 → Multiple messages appear in sequence-11
    // Given I am on Routes.demo
    await page.goto(`${Routes.demo.root}`);
    await initializeTestState(page);

    // When I type "First message" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('First message');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // And I type "Second message" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Second message');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages last message should be "Second message"
    // Verify last user message contains expected text
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"]').last()).toContainText('Second message');

  });

});
