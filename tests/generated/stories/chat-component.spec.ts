/**
 * ⚠️  AUTO-GENERATED FILE - DO NOT EDIT MANUALLY!
 * 
 * ❌ WARNING: ANY MANUAL EDITS WILL BE OVERWRITTEN ON NEXT GENERATION
 * 
 * This file is automatically generated from Gherkin feature files.
 * To make changes:
 *   1. Edit the .feature file in features/
 *   2. Regenerate: npx si generate-story-tests features -o tests/generated/stories
 * 
 * Generated Playwright Test
 * Feature: Chat Component
 * 
 * Generated by: GraphTestGenerator
 * Generated at: 2026-01-27T21:54:42.929Z
 */

import { test, expect } from '@playwright/test';
import { testId } from '@supernal/interface/testing';
import { Chat, Examples } from '../../../src/architecture/ComponentNames';
import { Routes } from '../../../src/architecture/Routes';
import { setComponentState, getComponentState, initializeTestState } from '@supernal/interface/testing';
import { ComponentData } from '../../../src/architecture/DemoComponentData';

test.describe('Chat Component', () => {
  test.setTimeout(30000);

  // Initialize test state manager after page navigation
  test.afterEach(async ({ page }) => {
    // Clean up test state after each test
  });

  test('Starting with empty chat', async ({ page }) => {
    // Execution order: Starting with empty chat-93 → Starting with empty chat-94 → Starting with empty chat-95 → Starting with empty chat-96 → Starting with empty chat-97 → Starting with empty chat-98
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // Given chat state is Components.Examples.chat.state.empty
    await setComponentState(page, 'chat', ComponentData.Examples.chat.state.empty);

    // Then Components.Chat.messages should be empty
    // Verify no user/ai chat messages exist (system messages may be present)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(0);

    // And Components.Chat.input should be enabled
    await expect(page.locator(testId(Chat.input))).toBeEnabled();

  });

  test('Sending a single message', async ({ page }) => {
    // Execution order: Sending a single message-99 → Sending a single message-100 → Sending a single message-101 → Sending a single message-102 → Sending a single message-103 → Sending a single message-104 → Sending a single message-105 → Sending a single message-106
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // Given chat state is Components.Examples.chat.state.empty
    await setComponentState(page, 'chat', ComponentData.Examples.chat.state.empty);

    // When I type "Hello, World!" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Hello, World!');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages should contain 1 message
    // Verify Components.Chat.messages contains 1 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(1);

    // And Components.Chat.messages last message should be "Hello, World!"
    // Verify last user message contains expected text
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"]').last()).toContainText('Hello, World!');

  });

  test('Viewing existing conversation', async ({ page }) => {
    // Execution order: Viewing existing conversation-107 → Viewing existing conversation-108 → Viewing existing conversation-109 → Viewing existing conversation-110 → Viewing existing conversation-111
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // Given chat state is Components.Examples.chat.state.withMessages
    await setComponentState(page, 'chat', ComponentData.Examples.chat.state.withMessages);

    // Then Components.Chat.messages should contain 2 messages
    // Verify Components.Chat.messages contains 2 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(2);

  });

  test('Adding to existing conversation', async ({ page }) => {
    // Execution order: Adding to existing conversation-112 → Adding to existing conversation-113 → Adding to existing conversation-114 → Adding to existing conversation-115 → Adding to existing conversation-116 → Adding to existing conversation-117 → Adding to existing conversation-118
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // Given chat state is Components.Examples.chat.state.single
    await setComponentState(page, 'chat', ComponentData.Examples.chat.state.single);

    // When I type "How are you?" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('How are you?');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages should contain 2 messages
    // Verify Components.Chat.messages contains 2 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(2);

  });

  test('Clearing all messages', async ({ page }) => {
    // Execution order: Clearing all messages-119 → Clearing all messages-120 → Clearing all messages-121 → Clearing all messages-122 → Clearing all messages-123 → Clearing all messages-124 → Clearing all messages-125
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // Given chat state is Components.Examples.chat.state.withMessages
    await setComponentState(page, 'chat', ComponentData.Examples.chat.state.withMessages);

    // When I click Components.Chat.clearButton
    await page.locator(testId(Chat.clearButton)).first().click();

    // Then chat state should be Components.Examples.chat.state.empty
    // State assertion: Examples.chat.state.empty
    // const state = await getComponentState(page, 'component');
    // expect(state).toEqual(Examples.chat.state.empty);

    // And Components.Chat.messages should be empty
    // Verify no user/ai chat messages exist (system messages may be present)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(0);

  });

  test('Multiple messages in sequence', async ({ page }) => {
    // Execution order: Multiple messages in sequence-126 → Multiple messages in sequence-127 → Multiple messages in sequence-128 → Multiple messages in sequence-129 → Multiple messages in sequence-130 → Multiple messages in sequence-131 → Multiple messages in sequence-132 → Multiple messages in sequence-133 → Multiple messages in sequence-134 → Multiple messages in sequence-135 → Multiple messages in sequence-136
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // Given chat state is Components.Examples.chat.state.empty
    await setComponentState(page, 'chat', ComponentData.Examples.chat.state.empty);

    // When I type "Hello" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Hello');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // And I type "How are you?" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('How are you?');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // And I type "Nice to meet you" in Components.Chat.input
    await page.locator(testId(Chat.input)).fill('Nice to meet you');

    // And I click Components.Chat.sendButton
    await page.locator(testId(Chat.sendButton)).first().click();

    // Then Components.Chat.messages should contain 3 messages
    // Verify Components.Chat.messages contains 3 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(3);

  });

  test('Message persistence across actions', async ({ page }) => {
    // Execution order: Message persistence across actions-137 → Message persistence across actions-138 → Message persistence across actions-139 → Message persistence across actions-140 → Message persistence across actions-141 → Message persistence across actions-142 → Message persistence across actions-143
    // Given I am on Routes.Demo
    await page.goto(`${Routes.demo}`);
    await initializeTestState(page);

    // Given Components.Chat.bubble is visible
    await page.locator(testId(Chat.bubble)).first().waitFor({ state: 'visible' });

    // When I click Components.Chat.bubble
    await page.locator(testId(Chat.bubble)).first().click();

    // Given chat state is Components.Examples.chat.state.single
    await setComponentState(page, 'chat', ComponentData.Examples.chat.state.single);

    // When I refresh the page
    await page.reload();
    await initializeTestState(page);

    // Then chat state should be Components.Examples.chat.state.single
    // State assertion: Examples.chat.state.single
    // const state = await getComponentState(page, 'component');
    // expect(state).toEqual(Examples.chat.state.single);

    // And Components.Chat.messages should contain 1 message
    // Verify Components.Chat.messages contains 1 user/ai chat message(s)
    await expect(page.locator(testId(Chat.messages)).locator('[data-testid="chat-message-user"], [data-testid="chat-message-ai"]')).toHaveCount(1);

  });

});
